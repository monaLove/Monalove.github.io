(function($) { var env = "production"; var fileList = []; fileList.push("//www.washingtonpost.com/pb/gr/c/javascript/r0TEMqBRrcpdrp/conf-production/b5411285f6.js?_=3f62d");fileList.push("//www.washingtonpost.com/pb/gr/c/javascript/r0TEMqBRrcpdrp/modal-css/938c258067.css?_=0b85f");fileList.push("//www.washingtonpost.com/pb/gr/c/javascript/r0TEMqBRrcpdrp/identity-management/a925dd0217.js?_=0cdc2"); fileList.push("//www.washingtonpost.com/pb/resources/js/utils/main.js?token=201609281521EST"); fileList.push("//www.washingtonpost.com/pb/gr/c/javascript/r0TEMqBRrcpdrp/wapo-production/8f8c39c9d8.js?_=65836"); var fileList2 = []; /*fileList2.push("//js.washingtonpost.com/wp-stat/advertising/pseudo-static/identity-retargeting.js"); */ fileList.push("//www.washingtonpost.com/wp-stat/advertising/pseudo-static/identity-retargeting.js"); if (typeof $.jqm === 'undefined') { fileList.unshift("//www.washingtonpost.com/pb/gr/c/javascript/r0TEMqBRrcpdrp/jqmodal/7a5b554023.js?_=3f62d" ); } if (typeof $.cookie === 'undefined') { fileList.unshift("//www.washingtonpost.com/pb/gr/c/javascript/r0TEMqBRrcpdrp/jquery-cookie/4cc3c1bef0.js?_=adc46" ); } if (typeof jQuery === 'undefined') { fileList.unshift("//www.washingtonpost.com/pb/gr/c/javascript/r0TEMqBRrcpdrp/jquery/c85562b39d.js?_=fbc0f" ); } /* function loadResources() { wp_import.valor(true); console.time("ResourceBundle pb-r-identity"); var r = new ResourceBundle('pb-r-identity'); $.each(fileList, function(key,value) { r.push(value); }); var r2 = new ResourceBundle('pb-r-retargeting'); $.each(fileList2, function(key,value) { r2.push(value); }); $(window.document).trigger('twp.identity.load.start'); r.trigger() .always(function() { if (window.performance && typeof performance.mark === 'function') window.performance.mark('ResourceBundle pb-r-identity'); console.timeEnd("ResourceBundle pb-r-identity"); $(window.document).trigger('twp.identity.load.complete'); }) .fail(function(a, b) { try { console.error(a, b); } catch(e) { } }); ResourceBundle.when('pb-r-identity').then(function(){ r2.trigger('pb-r-retargeting',true); }) .fail(function(a, b) { try { console.error(a, b); } catch(e) { } }); } if (typeof window.ResourceBundle === 'undefined') { var jsHeadJs = ; var jsscript = document.createElement('script'); jsscript.onload = jsscript.onreadystatechange = function(){ if ( this.readyState && this.readyState != "complete" && this.readyState != "loaded" ) { return; } loadResources(); }; jsscript.src = jsHeadJs; var jssib = document.getElementsByTagName('script')[0]; jssib.parentNode.insertBefore(jsscript, jssib); } else { loadResources(); } */ window.head_conf = {head: "TWPHead"}; console.time("ResourceBundle pb-r-identity"); if (typeof window.TWPHead == 'undefined') { var jsHeadJs = "//js.washingtonpost.com/pb/resources/js/head.min.js"; var jsscript = document.createElement('script'); jsscript.onload = jsscript.onreadystatechange = function(){ if ( this.readyState && this.readyState != "complete" && this.readyState != "loaded" ) { return; } TWPHead.load(fileList,function(){ console.timeEnd("ResourceBundle pb-r-identity"); }); }; jsscript.src = jsHeadJs; var jssib = document.getElementsByTagName('script')[0]; jssib.parentNode.insertBefore(jsscript, jssib); } else { TWPHead && TWPHead.load(fileList,function(){ console.timeEnd("ResourceBundle pb-r-identity"); }); } })(jQuery);